<% component = capture do %>
  <% if example.has_block? %>
    <%= render component_doc.partial_path, example.html_safe_data do |*args| %>
      <% block_args = example.block_arguments.map(&:to_sym).zip(args).to_h %>
      <%= render inline: example.block, locals: block_args %>
    <% end %>
  <% else %>
    <%= render component_doc.partial_path, example.html_safe_data %>
  <% end %>
<% end %>

<% if example.has_embed? %>
  <%= render inline: example.embed, locals: { component: component } %>
<% else %>
  <%= component %>
<% end %>
