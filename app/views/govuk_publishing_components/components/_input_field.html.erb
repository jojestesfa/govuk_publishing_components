<%
  value ||= nil
  id ||= "input-#{SecureRandom.uuid}"
  type ||= "text"
  data ||= nil
  autocomplete ||= nil
  tabindex ||= nil
  autofocus ||= nil
  readonly ||= nil
  maxlength ||= nil
  inputmode ||= nil
  pattern ||= nil
  describedby ||= nil
  controls ||= nil

  search_icon ||= nil
  width ||= nil
  has_error ||= nil

  prefix ||= nil
  suffix ||= nil

  if type == "number"
    type = "text"
    inputmode = "numeric"
    pattern = "[0-9]*"
  end

  css_classes = %w(gem-c-input-field__input govuk-input)
  css_classes << "govuk-input--error" if has_error
  css_classes << "govuk-input--width-#{width}" if [2, 3, 4, 5, 10, 20, 30].include?(width)
  css_classes << "gem-c-input-field__input--search-icon" if search_icon
%>

<%= content_tag :div, class: "gem-c-input-field govuk-input__wrapper" do %>
  <%= tag.span prefix, class: "govuk-input__prefix", aria: { hidden: true } if prefix %>
  <%= tag.input name: name,
                value: value,
                class: css_classes,
                id: id,
                type: type,
                data: data,
                autocomplete: autocomplete,
                tabindex: tabindex,
                autofocus: autofocus,
                readonly: readonly,
                maxlength: maxlength,
                inputmode: inputmode,
                pattern: pattern,
                aria: {
                  describedby: Array(describedby).join(" "),
                  controls: controls
                } %>
  <%= tag.span suffix, class: "govuk-input__suffix", aria: { hidden: true } if suffix %>
<% end %>
